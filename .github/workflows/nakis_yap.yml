name: Janome MB4 Profesyonel Uretim Hattı

on:
  push:
    branches: [ main ]
  workflow_dispatch:
    inputs:
      metin:
        description: 'Nakış yapılacak yazı'
        required: true
        default: 'PIVAZ'
      boyut:
        description: 'Font Boyutu (40-150)'
        required: true
        default: '80'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Kodlari Cek
        uses: actions/checkout@v4

      - name: Python Hazirla
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: Gerekli Kütüphaneleri Kur
        run: pip install pyembroidery Pillow numpy

      - name: Nakış Dosyasını Üret
        # Manuel tetiklemede girilen yazıyı kullanır, yoksa varsayılanı yapar
        run: python create_embroidery.py

      - name: Dosyalari Yukle
        uses: actions/upload-artifact@v4
        with:
          name: NAKIS_CIKTISI
          path: |
            ozel_tasarim.dst
            ozel_tasarim.jef
